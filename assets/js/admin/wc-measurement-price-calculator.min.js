"use strict";jQuery(document).ready(function(_){function t(){var a=new RegExp(/\(([^)]+)\)/),r="("+String(wc_price_calculator_admin_params.woocommerce_currency_symbol)+")",e=_('label[for="_regular_price"]');e.html(e.html().replace(a,r));var t=_('label[for="_sale_price"]');t.html(t.html().replace(a,r)),_('.woocommerce_variable_attributes input[type="text"]').each(function(e,t){!(t=_(t)).attr("name")||"variable_price"!==t.attr("name").substr(0,14)&&"variable_regular_price"!==t.attr("name").substr(0,22)&&"variable_sale_price"!==t.attr("name").substr(0,19)||t.prev().html(t.prev().html().replace(a,r))})}function a(){var e=_('label[for="_stock"]').text();-1!==e.indexOf("(")&&(e=e.substr(0,e.indexOf("(")-1),_('label[for="_stock"]').text(e)),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){if("variable_stock"===(t=_(t)).attr("name").substr(0,14)){var a=t.prev().text();-1!==a.indexOf("(")&&(a=a.substr(0,a.indexOf("(")-1)+":",t.prev().text(a))}})}function i(){var e=_('label[for="_weight"]').text().substr(0,_('label[for="_weight"]').text().indexOf("("))+"("+wc_price_calculator_admin_params.woocommerce_weight_unit+")";_('label[for="_weight"]').text(e),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){if("variable_weight"===(t=_(t)).attr("name").substr(0,15)){var a=t.prev().text();-1!==a.indexOf("(")&&(a=a.substr(0,a.indexOf("(")-1),t.prev().text(a))}})}function e(){_("._weight_field").show(),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){"variable_weight"===(t=_(t)).attr("name").substr(0,15)&&t.prev().show()})}function r(){_(".measurement_description").hide(),_(".measurement_fields").hide()}function c(e){e&&0<_(".wc-calculator-pricing-table tbody tr").size()?function(){""!==_("#_regular_price").val()&&_("#_regular_price").data("orig-value",_("#_regular_price").val()).val("");_("#_regular_price").closest(".form-field").hide(),""!==_("#_sale_price").val()&&_("#_sale_price").data("orig-value",_("#_sale_price").val()).val("");_("#_sale_price").closest(".form-field").hide(),_('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(e,t){!(t=_(t)).attr("name")||"variable_price"!==t.attr("name").substr(0,14)&&"variable_regular_price"!==t.attr("name").substr(0,22)&&"variable_sale_price"!==t.attr("name").substr(0,19)||(t.prop("readonly",!0),_(".pricing-rules-enabled-notice."+t.attr("id")).length||t.after('<small class="pricing-rules-enabled-notice '+t.attr("id")+'">'+wc_price_calculator_admin_params.pricing_rules_enabled_notice+"</small>"),""!==t.val()&&t.data("orig-value",t.val()))})}():function(){void 0!==_("#_regular_price").data("orig-value")&&""!==_("#_regular_price").data("orig-value")&&(_("#_regular_price").val(_("#_regular_price").data("orig-value")),_("#_regular_price").data("orig-value",""));_("#_regular_price").closest(".form-field").show(),void 0!==_("#_sale_price").data("orig-value")&&""!==_("#_sale_price").data("orig-value")&&(_("#_sale_price").val(_("#_sale_price").data("orig-value")),_("#_sale_price").data("orig-value",""));_("#_sale_price").closest(".form-field").show(),_('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(e,t){!(t=_(t)).attr("name")||"variable_price"!==t.attr("name").substr(0,14)&&"variable_regular_price"!==t.attr("name").substr(0,22)&&"variable_sale_price"!==t.attr("name").substr(0,19)||(t.prop("readonly",!1),_(".pricing-rules-enabled-notice").remove(),void 0!==t.data("orig-value")&&""!==t.data("orig-value")&&(t.val(t.data("orig-value")),t.data("orig-value","")))})}()}function n(){var r=0;_("table.wc-calculator-pricing-table tbody tr").each(function(e,t){_("input",t).each(function(e,t){var a=jQuery(t);a.attr("name",a.attr("name").replace(/\[([^[]*)\]/,"["+r+"]"))}),r++})}_("input#_manage_stock").change(function(){_(this).is(":checked")?_("p.stock_fields").show():_("p.stock_fields").hide()}).change(),_("._measurement_pricing").change(function(){"_measurement_"+_("#_measurement_price_calculator").val()+"_pricing"===_(this).attr("id")&&(_(this).is(":checked")?_(this).closest("div.measurement_fields").find("._measurement_pricing_fields").show():_(this).closest("div.measurement_fields").find("._measurement_pricing_fields").hide(),_(this).closest("div").find("._measurement_pricing_calculator_enabled").change())}),_("._measurement_pricing_calculator_enabled").change(function(){if("_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_calculator_enabled"===_(this).attr("id")){_(this).closest("div.measurement_fields").find("._measurement_pricing").is(":checked")&&_(this).is(":checked")?(!function(e){var a=String(wc_price_calculator_admin_params.woocommerce_currency_symbol),r=a+" / "+e,t=_('label[for="_regular_price"]');t.html(t.html().replace(a,r));var i=_('label[for="_sale_price"]');i.html(i.html().replace(a,r)),_('.woocommerce_variable_attributes input[type="text"], .woocommerce_variable_attributes input[type="number"]').each(function(e,t){!(t=_(t)).attr("name")||"variable_price"!==t.attr("name").substr(0,14)&&"variable_regular_price"!==t.attr("name").substr(0,22)&&"variable_sale_price"!==t.attr("name").substr(0,19)||t.prev().html(t.prev().html().replace(a,r))});var c=_(".wc-calculator-pricing-table .measurement-range-column span.column-title");c.text(c.data("text")+" ("+e+")"),(c=_(".wc-calculator-pricing-table .price-per-unit-column span.column-title")).text(c.data("text")+" ("+wc_price_calculator_admin_params.woocommerce_currency_symbol+" / "+e+")"),(c=_(".wc-calculator-pricing-table .sale-price-per-unit-column span.column-title")).text(c.data("text")+" ("+wc_price_calculator_admin_params.woocommerce_currency_symbol+" / "+e+")")}(_(this).closest("div").find("._measurement_pricing_unit option:selected").text()),_(this).closest("div.measurement_fields").find("._measurement_editable").attr("checked","checked").attr("disabled","disabled"),_(this).closest("div.measurement_fields").find("._measurement_pricing_calculator_fields").show(),_(".wc-measurement-price-calculator-pricing-table").removeClass("disabled"),c(!0),_(".show_if_pricing_calculator").show()):(t(),_(this).closest("div.measurement_fields").find("._measurement_editable").is(":disabled")&&_(this).closest("div").find("._measurement_editable").removeAttr("disabled"),_(this).closest("div.measurement_fields").find("._measurement_pricing_calculator_fields").hide(),_(".wc-measurement-price-calculator-pricing-table").addClass("disabled"),c(!1),_(".show_if_pricing_calculator").hide());var e=_(this).closest("div");e.find("._measurement_pricing_inventory_enabled").trigger("change"),e.find("._measurement_pricing_weight_enabled").trigger("change"),e.closest(".measurement_fields").find("._measurement_accepted_input").trigger("change")}}),_("#measurement_product_data").on("change","._measurement_accepted_input",function(){var e=_(this),t=e.data(),a=t[e.val()],r=_(this).closest("div"),i=_("#_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").is(":checked"),c=[];for(var n in t)t.hasOwnProperty(n)&&c.push(t[n]);var l=r.find(c.join(",")).hide();i&&l.filter(a).show()}).on("click","._measurement_input_attributes label",function(){_(this).closest("p").find(".wrap input:first-child").trigger("focus")}),setTimeout(function(){var e=window.location.hash;if(null!==e.match(/\#[a-z0-9\-]+/))try{_('a[href="'+e+'"]').trigger("click")}catch(e){}},250),_("select._measurement_accepted_input").on("change",function(){var e=_(this).closest("p").next(),t=e.next();"free"===_(this).val()?t.find("input").val(""):e.find("input").val("")}),_("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){_("#_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").change()}),_("._measurement_pricing_inventory_enabled").change(function(){"_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_inventory_enabled"===_(this).attr("id")&&(_("#_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").is(":checked")&&_(this).is(":checked")?function(i){a();var e=_('label[for="_stock"]').text()+" ("+i+")";_('label[for="_stock"]').text(e),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){if("variable_stock"===(t=_(t)).attr("name").substr(0,14)){var a=t.prev().text().indexOf(":"),r=t.prev().text().substr(0,a)+" ("+i+"):";t.prev().text(r)}})}(_(this).closest("div").find("._measurement_pricing_unit option:selected").text()):a())}),_("._measurement_pricing_weight_enabled").change(function(){wc_price_calculator_admin_params.woocommerce_weight_unit&&("_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_weight_enabled"===_(this).attr("id")&&(_("#_measurement_"+_("#_measurement_price_calculator").val()+"_pricing_calculator_enabled").is(":checked")&&_(this).is(":checked")?"weight"===_("#_measurement_price_calculator").val()?(_("._weight_field").hide(),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){"variable_weight"===(t=_(t)).attr("name").substr(0,15)&&t.prev().hide()})):(e(),function(r){i();var e=_('label[for="_weight"]').text().substr(0,_('label[for="_weight"]').text().indexOf("("))+"("+wc_price_calculator_admin_params.woocommerce_weight_unit+" / "+r+")";_('label[for="_weight"]').text(e),_('.woocommerce_variable_attributes input[type="number"]').each(function(e,t){if("variable_weight"===(t=_(t)).attr("name").substr(0,15)){var a=t.prev().text()+" ("+wc_price_calculator_admin_params.woocommerce_weight_unit+" / "+r+")";t.prev().text(a)}})}(_(this).closest("div").find("._measurement_pricing_unit option:selected").text())):(e(),i())))}),_(".woocommerce_variations").bind("woocommerce_variations_added",function(){_("._measurement_pricing").change()}),_("._measurement_pricing_unit").change(function(){_("._measurement_pricing").change()}),_("#_measurement_price_calculator").change(function(){var e=_(this).val();r(),_(".wc-measurement-price-calculator-pricing-table").addClass("disabled"),_("._measurement_pricing").change(),e?(_("#"+e+"_measurements").show().find("._measurement_accepted_input").trigger("change"),_("#"+e+"_description").show()):(t(),_(".show_if_pricing_calculator").hide()),"dimension"===e&&_("._measurement_dimension").change()}),_("._measurement_dimension").change(function(){_("._measurement_dimension").each(function(e,t){var a=_(t).attr("id");_("#"+a).is(":checked")?_("#"+a+"_fields").show():_("#"+a+"_fields").hide()})}),_(".measurement-subnav a").click(function(){var e=_(this);return _(this).hasClass("disabled")||(_(".measurement-subnav a").removeClass("active"),e.addClass("active"),_(".calculator-subpanel").hide(),_(e.attr("href")).show()),!1}).eq(0).click(),_("button.wc-calculator-pricing-table-add-rule").click(function(){var e=_("table.wc-calculator-pricing-table tbody tr").length;_("table.wc-calculator-pricing-table > tbody").append('<tr class="wc-calculator-pricing-rule"><td class="check-column"><input type="checkbox" name="select" /></td>\t\t\t<td class="wc-calculator-pricing-rule-range"><input type="text" name="_wc_measurement_pricing_rule_range_start['+e+']" value="" /> - <input type="text" name="_wc_measurement_pricing_rule_range_end['+e+']" value="" /></td>\t\t\t<td><input type="text" name="_wc_measurement_pricing_rule_regular_price['+e+']" value="" /></td>\t\t\t<td><input type="text" name="_wc_measurement_pricing_rule_sale_price['+e+']" value="" /></td></tr>'),c(!0),n()}),_("button.wc-calculator-pricing-table-delete-rules").click(function(){_("table.wc-calculator-pricing-table td.check-column input:checked").each(function(){_(this).closest("tr.wc-calculator-pricing-rule").fadeOut("400",function(){_(this).remove(),_.queue(this,"fx",function(){c(!0)})})}),_(".wc-calculator-pricing-table thead .check-column input").removeAttr("checked"),c(!0),n()}),_("table.wc-calculator-pricing-table tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td",scrollSensitivity:40,start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style"),n()}}),r(),_("#_measurement_price_calculator").change(),_("._measurement_dimension").change(),_("select#product-type").on("change",function(){_("input#_wc_measurement_price_calculator_min_price").val("")})});
"use strict";jQuery(document).ready(function(s){function r(a){void 0===wc_price_calculator_params.page_loaded?(!function(a){var e=s.cookie(wc_price_calculator_params.cookie_name);if(!1===s.isPlainObject(e)||s.isEmptyObject(e))return;for(var r in e)!1!==e.hasOwnProperty(r)&&a.find('.amount_needed[name="'+r+'"]:not(.fixed-value), input[name="'+r+'"].qty').val(e[r]);s("form.cart").trigger("wc-measurement-price-calculator-update"),setTimeout((c=a.find("input.amount_needed:first"),function(){c.trigger("mpc-change")}),100);var c}(a),wc_price_calculator_params.page_loaded=!0):setTimeout(function(){var r={};a.find(".amount_needed:input, input[name=quantity]").each(function(a,e){r[e.name]=e.value}),s.cookie(wc_price_calculator_params.cookie_name,r)},100)}function d(a,e,r,c){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+a)?+a:0,i=isFinite(+e)?Math.abs(e):0,_=void 0===c?",":c,o=void 0===r?".":r,n="";return 3<(n=(i?function(a,e){var r=Math.pow(10,e),c=""+a,t=c.indexOf(".");if(-1<t){if(t+=e,(c=(c=c.replace(".","")).slice(0,t)).length<t){var i=t-c.length;c*=Math.pow(10,i),c=Number(c,10)}else c=Number([c,".",c.slice(t)].join(""),10);return""+Math.round(c)/r}return a.toFixed(e)}(t,i):""+Math.round(t)).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,_)),(n[1]||"").length<i&&(n[1]=n[1]||"",n[1]+=new Array(i-n[1].length+1).join("0")),n.join(o)}function w(a,e,r){return void 0!==wc_price_calculator_params.unit_normalize_table[e]&&(void 0!==wc_price_calculator_params.unit_normalize_table[e].inverse&&wc_price_calculator_params.unit_normalize_table[e].inverse?a/=wc_price_calculator_params.unit_normalize_table[e].factor:a*=wc_price_calculator_params.unit_normalize_table[e].factor,e=wc_price_calculator_params.unit_normalize_table[e].unit),void 0!==wc_price_calculator_params.unit_conversion_table[e]&&void 0!==wc_price_calculator_params.unit_conversion_table[e][r]&&(void 0!==wc_price_calculator_params.unit_conversion_table[e][r].inverse&&wc_price_calculator_params.unit_conversion_table[e][r].inverse?a/=wc_price_calculator_params.unit_conversion_table[e][r].factor:a*=wc_price_calculator_params.unit_conversion_table[e][r].factor),a}function g(a){var e;return(e=a.match(/(\d+)\s+(\d+)\/(\d+)/))?0!==e[3]?parseFloat(e[1])+e[2]/e[3]:parseFloat(e[1]):(e=a.match(/(\d+)\/(\d+)/))?0!==e[2]?e[1]/e[2]:0:""===a?0:parseFloat(a)}function v(a){var e=s.trim(wc_price_calculator_params.woocommerce_price_thousand_sep).toString(),r=s.trim(wc_price_calculator_params.woocommerce_price_decimal_sep).toString();return a&&null!==a?isNaN(a)||(a=a.toString()):a="",0<a.length&&(a=(a="."===e?a.replace(/\./g,""):a.replace(new RegExp(e,"g"),"")).replace(r,".")),a}function h(a){var e,r,c="",t=wc_price_calculator_params.woocommerce_price_num_decimals,i=wc_price_calculator_params.woocommerce_currency_pos,_=wc_price_calculator_params.woocommerce_currency_symbol;switch(a=d(a,t,wc_price_calculator_params.woocommerce_price_decimal_sep,wc_price_calculator_params.woocommerce_price_thousand_sep),"yes"===wc_price_calculator_params.woocommerce_price_trim_zeros&&0<t&&(a=a.replace(new RegExp((e=wc_price_calculator_params.woocommerce_price_decimal_sep,r="/",(e+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(r||"")+"-]","g"),"\\$&")+"0+$")),"")),i){case"left":c='<span class="amount">'+_+a+"</span>";break;case"right":c='<span class="amount">'+a+_+"</span>";break;case"left_space":c='<span class="amount">'+_+"&nbsp;"+a+"</span>";break;case"right_space":c='<span class="amount">'+a+"&nbsp;"+_+"</span>"}return c}s.cookie.json=!0,s(document).bind("reset_image",function(){wc_price_calculator_params.product_price="",wc_price_calculator_params.product_measurement_value="",wc_price_calculator_params.product_measurement_unit="",s(".variable_price_calculator").hide()}),s(".wc-measurement-price-calculator-input-help").tipTip({attribute:"title",defaultPosition:"left"}),"undefined"!=typeof wc_price_calculator_params&&"pricing"===wc_price_calculator_params.calculator_type&&(s("form.cart").bind("wc-measurement-price-calculator-update",function(){var _,r,c;if(s(".amount_needed:input").each(function(a,e){e=s(e);var r=g("number"===s(this).attr("type")?e.val():v(e.val()));e.trigger("wc-measurement-price-calculator-product-measurement-change",[r])}),s(".amount_needed:input").each(function(a,e){e=s(e);var r=g("number"===s(this).attr("type")?e.val():v(e.val()));if(!r||r<0)return _=0,!1;if(r=w(r,e.data("unit"),e.data("common-unit")),"area-linear"===wc_price_calculator_params.measurement_type)_?_+=2*r:_=2*r;else if("area-surface"===wc_price_calculator_params.measurement_type){if(!_){var c=v(s("#length_needed").val());c=w(g(c),s("#length_needed").data("unit"),s("#length_needed").data("common-unit"));var t=v(s("#width_needed").val());t=w(g(t),s("#width_needed").data("unit"),s("#width_needed").data("common-unit"));var i=v(s("#height_needed").val());return i=w(g(i),s("#height_needed").data("unit"),s("#height_needed").data("common-unit")),void(_=2*(c*t+t*i+c*i))}}else _?_*=r:_=r}),_=w(_,wc_price_calculator_params.product_total_measurement_common_unit,wc_price_calculator_params.product_price_unit),_=parseFloat(_.toFixed(wc_price_calculator_params.measurement_precision)),wc_price_calculator_params.pricing_rules){var a=(r=_,c=null,s.each(wc_price_calculator_params.pricing_rules,function(a,e){if(r>=parseFloat(e.range_start)&&(""===e.range_end||r<=e.range_end))return c=e,!1}),c);a?(wc_price_calculator_params.product_price=parseFloat(a.price),s(".single_variation span.price").html(a.price_html)):(wc_price_calculator_params.product_price="",s(".single_variation span.price").html(""))}s("#_measurement_needed").val(_),s("#_measurement_needed_unit").val(wc_price_calculator_params.product_price_unit);var e=0,t=0,i=parseFloat(wc_price_calculator_params.pricing_overage),o=s(".product_price"),n=s(".product_price_overage");_?(e=wc_price_calculator_params.product_price*_,wc_price_calculator_params.minimum_price>e&&(e=parseFloat(wc_price_calculator_params.minimum_price)),0<i&&(e+=t=e*i,n.html(h(t))),o.html(h(e)).trigger("wc-measurement-price-calculator-product-price-change",[_,e])):(o.html("").trigger("wc-measurement-price-calculator-product-price-change"),0<i&&n.html(""));var u=null;if(u=s(".wc-measurement-price-calculator-total-amount")){var p=wc_price_calculator_params,l=w(_,p.product_price_unit,u.data("unit"));l=parseFloat(_.toFixed(p.measurement_precision)),u.text(d(l,p.measurement_precision,p.woocommerce_price_decimal_sep,p.woocommerce_price_thousand_sep))}if("undefined"!=typeof woocommerce_addons_params&&0<s("form.cart").find("#product-addons-total").length){var m=""===e?0:e;woocommerce_addons_params.product_price=m.toFixed(2),s("form.cart").trigger("woocommerce-product-addons-update")}}),s("form.cart").trigger("wc-measurement-price-calculator-update"),s(".amount_needed:input").on("keyup change mpc-change",function(){var a=s(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}).first().trigger("mpc-change"),s(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){var r=parseFloat(e.price);wc_price_calculator_params.product_price=r,s("form.cart").trigger("wc-measurement-price-calculator-show-variation",e),s("form.cart").trigger("wc-measurement-price-calculator-update"),s(".variable_price_calculator").show()}),s(document.body).bind("updated_addons",function(){var a=s("form.cart"),e=a.find("#product-addons-total");e.data("price")!==woocommerce_addons_params.product_price&&0<e.length&&(e.data("price",woocommerce_addons_params.product_price),a.trigger("woocommerce-product-addons-update"))})),"undefined"!=typeof wc_price_calculator_params&&"quantity"===wc_price_calculator_params.calculator_type&&(s("form.cart").bind("wc-measurement-price-calculator-quantity-changed",function(a,i){wc_price_calculator_params.product_measurement_value&&(s(".amount_needed, .amount_actual").each(function(a,e){if((e=s(e)).hasClass("amount_needed")&&1<s(".amount_needed").length)return!0;var r=w(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit")),c=parseFloat((r*i).toFixed(2)),t=wc_price_calculator_params;e.is("input")?e.val(c):e.text(d(c,1,t.woocommerce_price_decimal_sep,t.woocommerce_price_thousand_sep))}),s(".total_price").html(h(i*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-quantity-total-price-change",[i,wc_price_calculator_params.product_price]))}),s("form.cart").bind("wc-measurement-price-calculator-update",function(){var c;if(wc_price_calculator_params.product_measurement_value&&(s("input.amount_needed").each(function(a,e){var r=g(v((e=s(e)).val()));if(!r||r<0)return c=0,!1;r=w(r,e.data("unit"),e.data("common-unit")),c?c*=r:c=r}),c)){var a=w(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,wc_price_calculator_params.product_total_measurement_common_unit),t=Math.ceil((c/a).toFixed(wc_price_calculator_params.measurement_precision));t<parseFloat(wc_price_calculator_params.quantity_range_min_value)&&(t=parseFloat(wc_price_calculator_params.quantity_range_min_value)),parseFloat(wc_price_calculator_params.quantity_range_max_value)&&t>parseFloat(wc_price_calculator_params.quantity_range_max_value)&&(t=parseFloat(wc_price_calculator_params.quantity_range_max_value)),s("input[name=quantity]").val(t),s(".amount_actual").each(function(a,e){e=s(e);var r=w(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit"));r=parseFloat((r*t).toFixed(2)),e.is("input")?e.val(r):e.text(r)}),s(".total_price").html(h(t*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-total-price-change",[t,wc_price_calculator_params.product_price])}}),s(".amount_needed:input").on("keyup change mpc-change",function(){var a=s(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}),s("input[name=quantity]").on("keyup change mpc-change",function(a){var e=s(this).closest("form.cart");e.trigger("wc-measurement-price-calculator-quantity-changed",[a.target.value]),r(e)}).trigger("change"),s(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){wc_price_calculator_params.product_price=parseFloat(e.price),wc_price_calculator_params.product_measurement_value=parseFloat(e.product_measurement_value),wc_price_calculator_params.product_measurement_unit=e.product_measurement_unit,e.product_measurement_value?(0<s("input.amount_needed").length&&s("input.amount_needed").val()?s("form.cart").trigger("wc-measurement-price-calculator-update"):s("form.cart").trigger("wc-measurement-price-calculator-quantity-changed",[s("input[name=quantity]").val()]),s(".variable_price_calculator").show()):s(".variable_price_calculator").hide()}))});